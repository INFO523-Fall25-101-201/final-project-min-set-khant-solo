---
title: "BMW Car Sales Analysis & Price Prediction"
subtitle: "Temporal Validation of Market Value"
author: "Min Set Khant (Solo)"
title-slide-attributes:
  data-background-image: images/watercolour_sys02_img34_teacup-ocean.jpg
  data-background-size: stretch
  data-background-opacity: "0.7"
  data-slide-number: none
format:
  revealjs:
    theme:  ['data/customtheming.scss']
    slide-number: true     
    transition: slide      
    center: false        
    footer: "INFO-523 | BMW Price Prediction" 
  
editor: visual
jupyter: python3
execute:
  echo: false
---
## Introduction
### Project: BMW Car Sales — Data Analysis & Price Prediction

- **Goal:** Build a robust, temporally validated model to predict BMW car prices using multi-regional sales data.
- **Key Questions Addressed:**
    1. What are the key features influencing BMW car prices?
    2. Can a Machine Learning model accurately predict prices?
    3. How stable are these predictions over time (Temporal Validation)?

## Data Overview & Setup
### Dataset: BMW Worldwide Sales (2010–2024)

- **Source:** Kaggle (Multi-Regional Sales Data)
- **Status:** Data has been cleaned, imputed, and One-Hot Encoded.
- **Target Variable:** `Price_USD` (Log-transformed for modeling).

```{python,data-v-align="top"}
#| label: load-pkgs
#| message: false
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from pathlib import Path
import os
from pathlib import Path
import pandas as pd
#| label: load-dataset
#| message: false
data = pd.read_csv("data/bmw_worldwide_sales.csv")
data.head(10)
```


## EDA: Market Trends & Segmentation
### Regional Performance and Trends

| Sales Trend Over Time | Top Models by Regional Sales Volume |
|:---:|:---:|
| ![](../visuals/avg_price_by_year.png) | ![](../visuals/top_model_per_region.png) |
| *Observation: The average price shows a **clear, non-linear upward trend** over time, suggesting market inflation. This justifies the **Temporal Validation** strategy.* | *Observation: Model popularity is **highly segmented by region**. This confirms that the **Region** variable is a critical feature for effective price segmentation.* |
Detail: The analysis utilized over **50,000 records** of multi-regional sales. Regional features were processed using **One-Hot Encoding** to prevent models from assigning arbitrary ordinal relationships to categories.

## EDA: Correlation Analysis
### Price Relationships

| Correlation Matrix | Price Distribution by Fuel Type |
|:---:|:---:|
| ![](../visuals/correlation_matrix.png) | ![](../visuals/price_by_fueltype_box.png) |
| *Observation: Log-Price shows a strong **inverse linear relationship** with **Car Age** (depreciation) and a strong **positive correlation** with **Engine Size** (performance/class).* | *Observation: Significant differences in the **median price** across fuel types confirm this categorical feature has **strong predictive power** and is not independent of the target.* |
Detail: Two key features were engineered for this analysis: **Car Age** (calculated as `Current_Year - Model_Year`) and **Price per KM** (calculated as `Price_USD / Mileage_KM`), both showing significant predictive value.

## Modeling Approach
### Temporal Validation Strategy

- **Goal:** Test model stability and real-world predictive ability.
- **Split:** - **Train Set:** All data from **2010–2023**.
    - **Test Set:** Data from **Year 2024** (The "future" market).
- **Model Chosen:** **Random Forest Regressor** (highest predictive power).
- **Evaluation:** MAE and RMSE are converted back to **USD** for business interpretability.

## Random Forest Performance
### Model Accuracy (Reporting in USD)

| Metric | Value | Interpretation |
|:---:|:---:|:---:|
| **R-squared (Log Price)** | **0.9952** | Variance explained by the model on the transformed price. |
| **Root Mean Squared Error (RMSE)** | **$2,292.13** | Average prediction error, penalizing large errors. |
| **Mean Absolute Error (MAE)** | **$531.13** | **Most Interpretable:** On average, the model's price prediction is off by this amount in USD. |

*Interpretation: The model successfully predicted 2024 prices with an average absolute error of approximately **$531.13**, proving its temporal stability.*

## Key Price Drivers: Feature Importance
### Top 5 Predictors of BMW Price

The Random Forest model identified these key drivers based on **Gini Impurity Reduction**:

1.  **Price per KM** (**0.682**) - *Represents the calculated efficiency/condition ratio; its dominance suggests it captures the **residual value** most effectively.*
2.  **Mileage (KM)** (**0.318**) - *Primary measure of vehicle use and wear, directly driving the rate of depreciation.*
3.  **Engine Size (L)** (0.000018)
4.  **Car Age** (0.000015)
5.  **Transmission: Manual** (0.000004)

---
| Full Feature Importance |
|:---:|
| ![](../visuals/rf_feature_importance.png) |

*Technical Detail:* The model was chosen for its ability to calculate **Feature Importance** via Mean Decrease in Impurity (Gini). The trained model was serialized and saved as `rf_best_model.joblib` for future deployment.

## Conclusion: Summary of Findings
### Answering the Key Questions

* **Top Drivers:** Price is overwhelmingly driven by **Price per KM** and **Mileage (KM)**.
* **Model Success:** The Random Forest model demonstrates **strong temporal validation**, accurately predicting 2024 market prices with an MAE of **$531.13**.
* **Market Insight:** Model popularity and sales volume are highly specific to **Region**.  

## Business Recommendations
### Actionable Insights for Strategy

1.  **Pricing Strategy:** Use the model's feature importance to set pricing guidelines. The low MAE ($531.13) provides high confidence for automated pricing models.
2.  **Inventory Optimization:** Focus inventory based on the regional popularity derived from the EDA.
3.  **Future Validation:** Re-run the temporal validation annually to ensure the model's stability and adapt to market shifts.

## Thank You
### INFO-523 Final Project

- **Notebooks:** `01_Data_Preparation_and_EDA.ipynb`, `02-modeling.ipynb`
- **Output:** Trained model saved as `rf_best_model.joblib`.
- **Data:** Cleaned data saved as `bmw_cleaned.csv` and `bmw_modeling_ready.csv`.